import{c as s,o as l,a as e,k as j,d as u,f as p,F as M,e as w,l as v,w as $,n as B,r as b,g as W,s as x,h as D,i as k,j as C,y as H,t as h,z as N,U as g}from"./index-Cz9qMU4q.js";import{_ as A}from"./offers-BhP4Cafp.js";import{M as I}from"./MainLayout-CEmonEtD.js";import{_ as O}from"./TableComponent-B8pkeUEz.js";import{M as P}from"./ModalComponent-BVjXJSti.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z="/assets/company-info-BVXMGFHr.png",q="/assets/features-DUATsdsZ.png",G="/assets/features-2-BT6b3fuv.png",J="/assets/steps-UEdBMnTa.png",R="/assets/features-3-C4tRnu58.png",X={class:"md:grid grid-cols-1 gap-x-6 gap-y-2"},Z={class:"flex flex-col"},K={class:"text-gray-800 dark:text-gray-200 mb-1",for:"svg"},Q={key:0,class:"flex flex-col"},Y={class:"flex flex-col"},ee={key:1,class:"flex flex-col"},te={class:"flex flex-col"},ae={__name:"FeatureForm",props:{item:Object,type:String},emits:["send"],setup(a,{emit:y}){const V=y;function T(n){V("send",n)}return(n,o)=>(l(),s("form",{id:"feature-form",onSubmit:$(T,["prevent"]),class:"rounded-xl p-5 bg-[#aaaaaa] dark:bg-slate-900"},[e("div",X,[e("div",Z,[e("label",K,[a.type=="second"||a.type=="third"?(l(),s(M,{key:0},[w(" Emojie ")],64)):(l(),s(M,{key:1},[w(" SVG Icon ")],64))]),p(e("input",{"onUpdate:modelValue":o[0]||(o[0]=m=>a.item.svg=m),placeholder:"",type:"text","aria-label":"Icon",name:"svg",id:"svg",class:"custom-autocomplete text-[#009688] placeholder:text-gray-500 transition-all outline-none focus:outline-none border border-[#797979] dark:border-[#1b2e4b] focus:border-gray-600 px-5 py-3 rounded-md bg-[#ebedf07a] dark:bg-[#1b2e4b] w-full mb-4"},null,512),[[v,a.item.svg]])]),a.type=="five"?(l(),s("div",Q,[o[5]||(o[5]=e("label",{class:"text-gray-800 dark:text-gray-200 mb-1",for:"subtitle"},"Image (Link)",-1)),p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=m=>a.item.image=m),placeholder:"",type:"text","aria-label":"Image",name:"image",id:"image",class:"custom-autocomplete text-[#009688] placeholder:text-gray-500 transition-all outline-none focus:outline-none border border-[#797979] dark:border-[#1b2e4b] focus:border-gray-600 px-5 py-3 rounded-md bg-[#ebedf07a] dark:bg-[#1b2e4b] w-full mb-4"},null,512),[[v,a.item.image]])])):u("",!0),e("div",Y,[o[6]||(o[6]=e("label",{class:"text-gray-800 dark:text-gray-200 mb-1",for:"title"},"Title",-1)),p(e("input",{"onUpdate:modelValue":o[2]||(o[2]=m=>a.item.title=m),placeholder:"",type:"text","aria-label":"Title",name:"title",id:"title",class:"custom-autocomplete text-[#009688] placeholder:text-gray-500 transition-all outline-none focus:outline-none border border-[#797979] dark:border-[#1b2e4b] focus:border-gray-600 px-5 py-3 rounded-md bg-[#ebedf07a] dark:bg-[#1b2e4b] w-full mb-4"},null,512),[[v,a.item.title]])]),a.type=="second"||a.type=="third"||a.type=="five"?(l(),s("div",ee,[o[7]||(o[7]=e("label",{class:"text-gray-800 dark:text-gray-200 mb-1",for:"subtitle"},"Subitle",-1)),p(e("input",{"onUpdate:modelValue":o[3]||(o[3]=m=>a.item.subtitle=m),placeholder:"",type:"text","aria-label":"Subitle",name:"subtitle",id:"subtitle",class:"custom-autocomplete text-[#009688] placeholder:text-gray-500 transition-all outline-none focus:outline-none border border-[#797979] dark:border-[#1b2e4b] focus:border-gray-600 px-5 py-3 rounded-md bg-[#ebedf07a] dark:bg-[#1b2e4b] w-full mb-4"},null,512),[[v,a.item.subtitle]])])):u("",!0),e("div",te,[o[8]||(o[8]=e("label",{class:"text-gray-800 dark:text-gray-200 mb-1",for:"content"},"Content",-1)),p(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=m=>a.item.content=m),placeholder:"",type:"text","aria-label":"Content",name:"content",id:"content",class:"custom-autocomplete text-[#009688] placeholder:text-gray-500 transition-all outline-none focus:outline-none border border-[#797979] dark:border-[#1b2e4b] focus:border-gray-600 px-5 py-3 rounded-md bg-[#ebedf07a] dark:bg-[#1b2e4b] w-full mb-4"},null,512),[[v,a.item.content]])])]),j(n.$slots,"default")],32))}},oe={class:"p-6"},re={key:0,src:z,class:"w-full rounded-lg mb-4"},le={key:1,src:q,class:"w-full rounded-lg mb-4"},se={key:2,src:G,class:"w-full rounded-lg mb-4"},ne={key:3,src:J,class:"w-full rounded-lg mb-4"},ie={key:4,src:A,class:"w-full rounded-lg mb-4"},de={key:5,src:R,class:"w-full rounded-lg mb-4"},ue={class:"grid grid-cols-3 gap-2"},me={class:"flex flex-col"},ce={class:"text-gray-800 dark:text-gray-200 mb-1",for:"title"},fe=["onUpdate:modelValue","name","id"],be=["disabled"],ge={key:0,class:"spinner"},ye={class:"table-row"},pe={class:"text-gray-800 dark:text-gray-200"},ve={class:"text-gray-800 dark:text-gray-200"},xe=["innerHTML"],he={key:0,class:"text-gray-800 dark:text-gray-200"},ke=["src"],we={class:"text-gray-800 dark:text-gray-200"},Ve={key:1,class:"text-gray-800 dark:text-gray-200"},Te=["innerHTML"],Ue={class:"text-gray-800 dark:text-gray-200"},Ce={class:"flex gap-2 items-center"},Me=["onClick"],Se={key:0,class:"max-h-[70vh] overflow-auto custom-scroll"},_e={class:"flex justify-end gap-2 p-4 w-full"},Ee=["disabled"],$e={key:0,class:"spinner"},He={__name:"FeaturesPage",props:{type:String},setup(a){const y=a,V=B(()=>[{name:"#",minWidth:10},{name:"Icon",minWidth:50},{name:"Image",minWidth:50,hidden:y.type!="five"},{name:"Title",value:i=>i.title,minWidth:120},{name:"Subtitle",value:i=>i.subtitle,minWidth:250,hidden:y.type!="second"&&y.type!="third"&&y.type!="five"},{name:"Content",value:i=>i.content,minWidth:250},{name:"Created at",minWidth:100},{name:"Actions",minWidth:20}]),T=b(V),n=b(!1),o=b([]),m=b([]),S=b(1),_=b(5),E=b(""),c=b({edit:!1,remove:!1,item:{}});async function L(i){const r=new FormData(i.target),t=c.value.item;n.value=!0;const f=Object.fromEntries(r.entries());t.id==null?x.from("features").insert(f).select().then(d=>{d.error?(g.notify("Error",d.error.message,"error"),console.error("Error adding stuent:",d.error)):(o.value.unshift(d.data[0]),g.notify("Congratulations","The unit has been added."))}):x.from("features").update(f).eq("id",t.id).select().then(d=>{if(d.error)console.error("Error updating feature:",d.error),g.notify("Error",d.error.message,"error");else for(let U in o.value)if(o.value[U].id==t.id){o.value[U]=d.data[0],g.notify("Congratulations","Feature's text has been updated.");break}}),c.value={edit:!1,remove:!1,item:{}},n.value=!1}async function F(i){const r=new FormData(i.target);n.value=!0;try{for(const[t,f]of r.entries()){const{error:d}=await x.from("texts").update({content:f}).eq("id",t);d&&(console.error("Error updating feature:",d),g.notify("Error",d.message,"error"))}}catch(t){console.error("Unexpected error:",t),g.notify("Error","Unexpected error occurred","error")}n.value=!1}return W(()=>{n.value=!0,x.from("texts").select("*").then(i=>{m.value=i.data,x.from("features").select("*").then(r=>{o.value=r.data,n.value=!1}).catch(r=>{console.log(r),n.value=!1})}).catch(i=>{console.log(i),n.value=!1})}),(i,r)=>(l(),D(I,null,{default:k(()=>[e("div",oe,[a.type=="first"?(l(),s("img",re)):u("",!0),a.type=="second"?(l(),s("img",le)):u("",!0),a.type=="third"?(l(),s("img",se)):u("",!0),a.type=="fourth"?(l(),s("img",ne)):u("",!0),a.type=="five"?(l(),s("img",ie)):u("",!0),a.type=="seven"?(l(),s("img",de)):u("",!0),e("form",{onSubmit:$(F,["prevent"]),class:"mb-4"},[e("div",ue,[(l(!0),s(M,null,H(m.value.filter(t=>t.type==a.type),t=>(l(),s("div",me,[e("label",ce,"Text "+h(t.index),1),p(e("input",{"onUpdate:modelValue":f=>t.content=f,placeholder:"",type:"text","aria-label":"Title",name:t.id,id:t.id,class:"custom-autocomplete text-[#009688] placeholder:text-gray-500 transition-all outline-none focus:outline-none border border-[#797979] dark:border-[#1b2e4b] focus:border-gray-600 px-5 py-3 rounded-md bg-[#ebedf07a] dark:bg-[#1b2e4b] w-full mb-4"},null,8,fe),[[v,t.content]])]))),256))]),e("button",{type:"submit",disabled:n.value,class:"duration-300 px-4 disabled:opacity-80 transition-transform flex gap-2 justify-center items-center bg-[#058beb] text-white py-[0.4rem] rounded-md shadow-lg shadow-[#00000060] hover:translate-y-[-0.2rem]"},[n.value?(l(),s("div",ge)):u("",!0),r[4]||(r[4]=w(" Save "))],8,be)],32),C(O,{columns:T.value,items:o.value.filter(t=>t.type==a.type),page:S.value,"onUpdate:page":r[0]||(r[0]=t=>S.value=t),"items-per-page":_.value,"onUpdate:itemsPerPage":r[1]||(r[1]=t=>_.value=t),modelValue:E.value,"onUpdate:modelValue":r[2]||(r[2]=t=>E.value=t)},{row:k(({item:t,index:f,internal:d})=>[e("tr",ye,[e("td",pe,h(Number(f)+1),1),e("td",ve,[e("div",{innerHTML:t.svg},null,8,xe)]),a.type=="five"?(l(),s("td",he,[e("img",{src:t.image,class:"w-10"},null,8,ke)])):u("",!0),e("td",we,h(t.title),1),a.type=="second"||a.type=="third"||a.type=="five"?(l(),s("td",Ve,h(t.subtitle),1)):u("",!0),e("td",{class:"text-gray-800 dark:text-gray-200",innerHTML:t.content.replaceAll(`
`,"<br />")},null,8,Te),e("td",Ue,h(N(g).toDateTimeText(t.created_at)),1),e("td",null,[e("div",Ce,[e("button",{onClick:U=>c.value={edit:!0,remove:!1,item:JSON.parse(JSON.stringify(t))},class:"bg-transparent transition-all text-orange-400 hover:text-orange-600 hover:scale-125 p-1 border-none focus:border-none"},r[5]||(r[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil-square",viewBox:"0 0 16 16"},[e("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),e("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"})],-1)]),8,Me)])])])]),_:1},8,["columns","items","page","items-per-page","modelValue"]),C(P,{modelValue:c.value.edit,"onUpdate:modelValue":r[3]||(r[3]=t=>c.value.edit=t),title:c.value.item.id==null?"Add unit":"Edit feature text",subtitle:c.value.item.id==null?"Complete the form to add a new unit":"Complete the form to update feature text"},{footer:k(()=>[e("div",_e,[e("button",{form:"feature-form",type:"submit",disabled:n.value,class:"duration-300 px-4 disabled:opacity-80 transition-transform flex gap-2 justify-center items-center bg-[#058beb] text-white py-[0.4rem] rounded-md shadow-lg shadow-[#00000060] hover:translate-y-[-0.2rem]"},[n.value?(l(),s("div",$e)):u("",!0),r[6]||(r[6]=w(" Save "))],8,Ee)])]),default:k(()=>[c.value.edit?(l(),s("div",Se,[C(ae,{item:c.value.item,type:a.type,onSend:L},null,8,["item","type"])])):u("",!0)]),_:1},8,["modelValue","title","subtitle"])])]),_:1}))}};export{He as default};
